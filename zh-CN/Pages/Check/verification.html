<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title></title>
	<meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=9">
    <link href="../../../Assets/css/bootstrap.min.css" rel="stylesheet" />

    <link href="../../../Assets/css/nifty.min.css" rel="stylesheet" />
    <link href="../../../Assets/plugins/magic-check/css/magic-check.min.css" rel="stylesheet" />
    <link href="../../../Assets/css/common.css" rel="stylesheet" />
    <link href="../../../Assets/css/red.css" rel="stylesheet" />
    <script src="../../../Assets/Scripts/jquery-2.2.4.min.js"></script>
    <script src="../../../Assets/Scripts/common/bootstrap.min.js"></script>
    <script src="../../../Assets/Scripts/common/nifty.min.js"></script>
    <script src="../../../Assets/Scripts/knockout-3.4.0.js"></script>
    <script src="../../../Assets/Scripts/knockout.validation.js"></script>
    <script type="text/javascript" src="../../../Assets/Scripts/common/menu.js"></script>
    <!--<script src="/Assets/Scripts/require.js" data-main="verification.js"></script>-->

    <style>
        .validationMessage {
            color:red;
        }
    </style>
</head>
<body>
    <div>
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"></button>
                <h4 class="modal-title" id="myLargeModalLabel">首次使用，请补充个人信息</h4>
            </div>
            <div class="modal-body news-content">

                <form class="form-horizontal form-padding">
                    <div class="form-group">
                        <label class="col-lg-2 control-label text-bold">DMS-域账号</label>
                        <div class="col-lg-5">
                            <p class="form-control-static">张三</p>
                        </div>
                    </div>[]
                    <div class="form-group">
                        <label class="col-lg-2 control-label text-bold">所属机构/部门</label>
                        <div class="col-lg-5">
                            <p class="form-control-static">北京市分行/公司金融部01团队</p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-2 control-label text-bold">所属团队(铺底数据，仅单一团队）</label>
                        <div class="col-lg-8">
                            <div class="checkbox">
                                <input class="magic-checkbox" type="checkbox" name="checkbox" value="1" data-title="基础设施" checked disabled>
                                <label class="checkbox">基础设施</label>
                                <input class="magic-checkbox" type="checkbox" name="checkbox" value="2" data-title="能源" disabled>
                                <label class="checkbox">能源</label>
                                <input class="magic-checkbox" type="checkbox" name="checkbox" value="3" data-title="建筑房地产" disabled>
                                <label class="checkbox">建筑房地产</label>
                                <input class="magic-checkbox" type="checkbox" name="checkbox" value="4" data-title="机关团体团队" disabled>
                                <label class="checkbox">机关团体团队</label>
                            </div>
                            <div class="checkbox">
                                <input class="magic-checkbox" type="checkbox" name="checkbox" value="5" data-title="油气化工" disabled>
                                <label class="checkbox">油气化工</label>
                                <input class="magic-checkbox" type="checkbox" name="checkbox" value="6" data-title="贸易融资客户关系" disabled>
                                <label class="checkbox">贸易融资客户关系</label>
                                <input class="magic-checkbox" type="checkbox" name="checkbox" value="7" data-title="民生消费" disabled>
                                <label class="checkbox">民生消费</label>
                                <input class="magic-checkbox" type="checkbox" name="checkbox" value="8" data-title="部队事业团队" disabled>
                                <label class="checkbox">部队事业团队</label>
                            </div>
                            <div class="checkbox">
                                <input class="magic-checkbox" type="checkbox" name="checkbox" value="9" data-title="交通" disabled>
                                <label class="checkbox">交通</label>
                                <input class="magic-checkbox" type="checkbox" name="checkbox" value="10" data-title="矿业资料" disabled>
                                <label class="checkbox">矿业资料</label>
                                <input class="magic-checkbox" type="checkbox" name="checkbox" value="11" data-title="装备制造团队" disabled>
                                <label class="checkbox">装备制造团队</label>
                                <input class="magic-checkbox" type="checkbox" name="checkbox" value="12" data-title="总经理室（管理层）" disabled>
                                <label class="checkbox">总经理室（管理层）</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-2 control-label text-bold">办公电话</label>
                        <div class="col-lg-5">
                            <input type="text" class="form-control" data-bind="value:phoneNumber" />
                            <span  data-bind="visible:phoneNumber.isValid()"></span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-2 control-label text-bold">手机</label>
                        <div class="col-lg-5">
                            <input type="text" class="form-control" data-bind='value: phone' />
                            <span  data-bind="visible:phone.isValid()"></span>

                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-2 control-label text-bold">e-HR号</label>
                        <div class="col-lg-5">
                            <input type="text" class="form-control" data-bind="value:eHR" />
                            <span  data-bind="visible:eHR.isValid()"></span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-2 control-label text-bold">Notes地址</label>
                        <div class="col-lg-5">
                            <input type="text" class="form-control" data-bind="value:notes" />
                            <span  data-bind="visible:notes.isValid()"></span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-2 control-label text-bold">CCMS系统账号维护</label>
                        <div class="col-lg-5">
                            <input type="text" class="form-control" />
                        </div>
                    </div>

                    <div class="modal-header">
                        <p> 如需修改信息默认信息，请联系管理管理员 李四。</p>
                        <p>如需修改手工录入信息，请点击“个人头像”进行修改。</p>
                    </div>


                    <div class="form-group pad-top">
                        <div class="col-lg-12 text-center">
                            <button id="save-user" class="btn btn-default mar-rgt" data-bind="click:Register">保存</button>
                            <button class="tn btn-default mar-lft">取消</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        var Product = function () {
            var self = this;
            self.phoneNumber = ko.observable().extend({
                required: {
                    params: true,
                    message:"请填写电话号码"
                },
                pattern: { params: /^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/, message: "请填写正确电话" },

            });

            self.phone = ko.observable().extend({

                required: {
                    params: true,
                    message: "请填写手机号"
                },
                pattern: { params: /^1[34578]\d{9}$/, message: "手机号需为1~34578开头的11位" },
                //判断输入必须为数字
                number: {
                    params: true,
                    message: "电话不合法",
                },

            });

            self.eHR = ko.observable().extend({
                required: {
                    params: true,
                    message: "请填写e-HR号"
                },


            });


            self.notes = ko.observable().extend({
                required: {
                    params: true,
                    message: "请填写Notes地址"
                }
            });

            self.address = ko.observable().extend({
                required: {
                    params: true,
                    message: "请填写address"
                }
            });

            self.availableCountries = ko.observableArray([
                { countryName: "UK", countryPopulation: 1 },
                { countryName: "US", countryPopulation: 2 },
                { countryName: "CHS", countryPopulation: 3 }
            ]);
            self.choseSelect = ko.observable("1");//选中的项，它会监视前台进行onchange的变化


            self.like = ko.observableArray([
                 { itemName: 'Music', itemValue: '1' },
                 { itemName: 'IT', itemValue: '2' },
                 { itemName: 'Sport', itemValue: '3' }
            ]),
            self.chosenlikes = ko.observableArray(["1", "3"])

            self.Register = function () {
                self.errors = ko.validation.group(self);
                if (self.isValid()) {
                    var arr = "";
                    for (var i in self.chosenlikes())
                        arr += i + ",";
                    var json = {
                        name: self.name(),
                        address: self.address(),
                        realName: self.realName(),
                        like: arr,
                        availableCountries: self.choseSelect(),
                        Email: self.Email(),
                        phone: self.phone(),
                        age: self.age(),
                    };

                    $.ajax({
                        type: "POST",
                        url: "/home/CreateAjaxPost",
                        data: json,
                        success: function (data) {
                            alert(JSON.stringify(data.obj));
                        }
                    });
                } else {

                    self.errors.showAllMessages();
                }
            };
        }

        var prduct = new Product();
        ko.applyBindings(prduct);
    </script>
</body>
</html>
